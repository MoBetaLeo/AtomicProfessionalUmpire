<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
<title>Atomic Professional Umpire</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

  <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

  <!-- polyfill -->  <script src="https://cdn.rawgit.com/mudcube/MIDI.js/master/inc/shim/Base64.js" type="text/javascript"></script>
  <script src="https://cdn.rawgit.com/mudcube/MIDI.js/master/inc/shim/Base64binary.js" type="text/javascript"></script>
  <script src="https://cdn.rawgit.com/mudcube/MIDI.js/master/inc/shim/WebAudioAPI.js" type="text/javascript"></script>
   <!-- midi.js package -->
  <script src="https://cdn.rawgit.com/mudcube/MIDI.js/master/js/midi/audioDetect.js" type="text/javascript"></script>
  <script src="https://cdn.rawgit.com/mudcube/MIDI.js/master/js/midi/gm.js" type="text/javascript"></script>
  <script src="https://cdn.rawgit.com/mudcube/MIDI.js/master/js/midi/loader.js" type="text/javascript"></script>
  <script src="https://cdn.rawgit.com/mudcube/MIDI.js/master/js/midi/plugin.audiotag.js" type="text/javascript"></script>
  <script src="https://cdn.rawgit.com/mudcube/MIDI.js/master/js/midi/plugin.webaudio.js" type="text/javascript"></script>
  <script src="https://cdn.rawgit.com/mudcube/MIDI.js/master/js/midi/plugin.webmidi.js" type="text/javascript"></script>
  <!-- utils -->

  <script src="https://cdn.rawgit.com/mudcube/MIDI.js/master/js/util/dom_request_xhr.js" type="text/javascript"></script>
  <script src="https://cdn.rawgit.com/mudcube/MIDI.js/master/js/util/dom_request_script.js" type="text/javascript"></script>
</head>
<body>
  <center><h1>Atomic Professional Umpire&copy;</h1></center>
  <center><h3>Imperial Majesty</h3></center>
  <center><h1>I am Thomas John Genco, <a href="https://www.facebook.com/thomas.genco.5">Giam Oranje 7</a>, The Included and Excluded, Even and Odd, Father of the Z Axis, Master of the Spectrum, Maker of Scales, Asker of Questions, Breath in the Lung, Sound in the Ear, Light in the Eye, Pi Kappa Phi, The King of Consent to a Queen of Curves, and Krietor President of the Atomic Professional Umpire with at least 1,567,752 points at 27 years of age</h1></center>
  <center><h2>Demonstrations_Points=</h2></center>
  <center><h1>!...20_Ds_288,000_Ps</h1></center>
  <center><h3>H...176_Ds_1,267,200_Ps</h3></center>
  <center><h4>Q...24_Ds_792_Ps</h4><center>
  <center><h5>Y...410_Ds_11,480_Ps</h5></center>
  <center><h6>B...8_Ds_280_Ps</h6></center>
    <center><img src="http://i.imgur.com/XZkNqxM.jpg" alt="TJG07" style="width:700px;height:700px;"></center><br>
    <center><img src="http://i.imgur.com/Sh13jCR.jpg" alt="Rhombus" style="width:700px;height:300px;"></center><br>
    <center><img src="http://i.imgur.com/spjifUK.jpg" alt="123" style="width:500px;height:500px;"></center><br>
    <center><img src="http://i.imgur.com/AYyN0Ha.jpg" alt="President" style="width:1000px;height:1000px;"></center><br>
    <center><img src="http://i.imgur.com/SYSIlot.jpg" alt="Krietor" style="width:1000px;height:1000px;"></center><br>
    <center><img src="http://i.imgur.com/dwLSbf8.jpg" alt="PKF" style="width:500px;height:500px;"></center><br>
    <center><img src="http://i.imgur.com/QNdxNUN.jpg" alt="PKF01" style="width:500px;height:500px;"></center><br>
    <center><img src="http://i.imgur.com/ZxDrGLm.jpg" alt="PKF02" style="width:500px;height:500px;"></center><br>
    <center><img src="http://i.imgur.com/jJ7nxAH.jpg" alt="PKF03" style="width:500px;height:500px;"></center><br>
    <center><img src="http://i.imgur.com/CT6GjWg.jpg" alt="PKF7" style="width:1000px;height:500px;"></center><br>
    <center><img src="http://i.imgur.com/tBDgRSa.jpg" alt="PKF0" style="width:500px;height:500px;"></center><br>
    <center><img src="http://i.imgur.com/mcayt67.jpg" alt="PKF3" style="width:500px;height:500px;"></center><br>
    <center><img src="http://i.imgur.com/tXAnx1d.jpg" alt="PKF4" style="width:500px;height:500px;"></center><br> 
    <center><img src="http://i.imgur.com/6fjBWqB.jpg" alt="XYZ" style="width:1000px;height:1000px;"></center><br> 
    <center><img src="http://i.imgur.com/SGg8cuI.jpg" alt="APU" style="width:1500px;height:1000px;"></center><br>
    <center><img src="http://i.imgur.com/KBnD9vd.jpg" alt="Times" style="width:1000px;height:1000px;"></center><br>
    <center><h1>genesis 11:1-9</h1></center>
    <center><h1>11/5/2009</h1></center>
    <center><img src="http://i.imgur.com/inJZuQz.jpg" alt="11/5/2009" style="width:300px;height:300px;"></center><br>
    <center><h1>daniel 2</h1></center>
    <center><img src="http://i.imgur.com/IQ288hr.jpg" alt="OWN" style="width:900px;height:500px;"></center><br>
    <div class="container">
  <br>
  <div class="row">
    <div class="col-sm-6">
      <label for="input">Text</label>
      <textarea name="input" id="input" cols="30" rows="10" class="form-control">TJ Genco</textarea>
    </div>
    <div class="col-sm-6">
      <label for="notes">Notes</label>
      <textarea name="notes" id="notes" cols="30" rows="10" class="form-control" disabled></textarea>
    </div>
  </div>
  <br>
  <a href="#" id="play" class="btn btn-success btn-lg" style="width: 100%">Play</a>
</div>

<script type="text/javascript">
window.duration = 0.7;window.velocity = 127;

var lettermap = {
  "h": "c",
  "f": "c#",
  "m": "c#",
  "a": "2m7",
  "n": "d",
  "e": "3m7",
  "k": "d#",
  "b": "d#",
  "i": "4M7",
  "t": "e",
  "g": "e",
  "o": "5D7",
  "c": "f",
  "r": "f",
  "u": "6m7",
  "s": "f#",
  "d": "f#",
  "l": "g",
  "p": "g#",
  "j": "g#",
  "x": "a",
  "v": "a",
  "w": "a#",
  "z": "a#",
  "q": "b",
  "y": "c",
}

var notemap = {
  "c": 48,
  "c#": 49,
  "d": 50,
  "d#": 51,
  "e": 52,
  "f": 53,
  "f#": 54,
  "g": 55,
  "g#": 56,
  "a": 57,
  "a#": 58,
  "b": 59,
}


window.onload = function () {
  $("#input").keyup(function(e){
    var letters = $("#input").val().toLowerCase().replace(/[^a-z]/g, '');
    var notes = letters.replace(/[a-z]/g, function(m){

      return lettermap[m] + " ";
    });
    // console.log(letters, notes);
    $("#notes").val(notes);
  });
  $("#input").keyup();

  $("#play").click(function(e){
    e.preventDefault();

    MIDI.setVolume(0, 127);

    var sequence = $("#notes").val().split(' ');

    for(var i=0; i<sequence.length; i++){
      var notes = sequence[i].split('+');

      for(var j=0; j<notes.length; j++){
        var note = notemap[notes[j]];
        if(note){
          // console.log('playing ', note);
          var delay = i*window.duration;
          console.log(delay);
          MIDI.noteOn(0, note, window.velocity, delay);
          MIDI.noteOff(0, note, delay + window.duration);
        }else{
          console.error("no note for", notes[j]);
        }
      }
    }
  })

  MIDI.loadPlugin({
    soundfontUrl: "https://cdn.rawgit.com/mudcube/MIDI.js/master/examples/soundfont/",
    instrument: "acoustic_grand_piano",
    onprogress: function(state, progress) {
      console.log(state, progress);
    },
    onsuccess: function() {
      console.log("MIDI loaded");
    }
  });
};
</script>
  <footer>
  <center><h2>Defamation_FalseAssociation_CopyRightInfringement</h2></center>
  <center><h2>11/5/2009_NOTAssociatedWithBounces_NotEvenOneCopy</h2></center>
    <center><h2>Broke_Bounced_Banned</h2></center>
    <center><h2>BouncePointsWillBeSubtracted.FalseAssociationWillAddTime.BanishmentIsForever</h2></center>
  </footer>
</body>
</html>
